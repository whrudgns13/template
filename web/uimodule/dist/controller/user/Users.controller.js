sap.ui.define(["../BaseController","sap/ui/core/Fragment","sap/m/MessageBox"],function(e,t,s){"use strict";return e.extend("com.myorg.myUI5App.controller.user.Users",{onInit:function(){this._setDefault()},getUserObj:function(){return{userName:"",name:{familyName:"",givenName:""},emails:[{type:"string",value:"",primary:true}],origin:"sap.default",schemas:["urn:scim:schemas:core:1.0"],phoneNumbers:[{value:""}]}},_setDefault:function(){const e=this.getView();const t=new sap.ui.model.json.JSONModel;const s=new sap.ui.model.json.JSONModel;const o=new sap.ui.model.json.JSONModel;e.setModel(t,"user");e.setModel(s,"users");e.setModel(o,"roles");this._userState="Edit";this._userModel=e.getModel("user");this._usersModel=e.getModel("users");this._rolesModel=e.getModel("roles");this._FCL=this.getView().byId("fcl");this.callSDK("GET");this.callSDK("GET",{},"/app/group")},onUserItemPress:function(e){const t=e.getParameter("listItem");const s=t.getBindingContextPath("users");const o=JSON.parse(JSON.stringify(this._usersModel.getProperty(s)));this._userModel.setProperty("/",o);this._userPath=s;this._FCL.getLayout()==="OneColumn"?this.onFCLTwoColumn():""},onSubmit:function(){if(!this.validationCheck())return;const e=this._userModel.getProperty("/");e.userName=`${e.name.familyName} ${e.name.givenName}`;this._userState==="create"?this.saveUser():this.editUser()},saveUser:function(){const e=this._userModel.getProperty("/");e.displayName="displayName test";this.callSDK("POST",e);this.onClose()},editUser:function(){const e=this._userModel.getProperty("/");this.callSDK("PUT",e);this.onClose()},deleteUser:async function(){const e=this._userModel.getProperty("/id");const t=await this.showWarningBox();if(t){this.callSDK("DELETE",{id:e})}},onOpenDialog:function(e){const s=this.getCustomDataKey(e.getSource());const o=this.getCustomDataValue(e.getSource());this._dialogName=s;switch(o){case"Create":this._userModel.setProperty("/",this.getUserObj());this._userState="create";this._FCL.getLayout()!=="OneColumn"?this.onFCLOneColumn():"";break;case"Edit":this._userState="edit";break;case"addRole":let e=this._rolesModel.getProperty("/resources");let t=this._userModel.getProperty("/groups");const s=e.filter(e=>{const s=t.findIndex(t=>e.id===t.value);if(s>-1)return false;return true});this._rolesModel.setProperty("/resources",s);break}const r=this.getView();if(!this[s]){this[s]=t.load({name:`com.myorg.myUI5App.view.user.${s}`,controller:this})}this[s].then(e=>{r.addDependent(e);e.open()})},getCustomDataKey(e){const t=e.getCustomData()[0].getKey();return t},getCustomDataValue(e){const t=e.getCustomData()[0].getValue();return t}})});