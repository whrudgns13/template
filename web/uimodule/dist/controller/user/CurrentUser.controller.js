sap.ui.define(["../BaseController","sap/ui/core/Fragment","sap/m/MessageBox"],function(e,t,o){"use strict";return e.extend("com.myorg.myUI5App.controller.user.CurrentUser",{onInit:function(){this._setDefault()},_setDefault:function(){const e=this.getView();const t=new sap.ui.model.json.JSONModel({user:{}});const o=new sap.ui.model.json.JSONModel;e.setModel(t,"user");e.setModel(o,"roles");this._userModel=e.getModel("user");this._rolesModel=e.getModel("roles");this.callSDK("GET",{},"/app/users/currentUser");this.callSDK("GET",{},"/app/group")},onDeleteUserRole:async function(e){const t=e.getParameter("listItem");const o=await this.showWarningBox();const s={groupId:t.getTitle(),userId:this._userModel.getProperty("/user/id")};if(o){this.callSDK("DELETE",s,"/app/group")}},onCreateUserRole:function(e){const t=e.getParameter("selectedItems");const o=t.map(e=>e.getTitle());const s=this._userModel.getProperty("/user/id");o.forEach(e=>{const t={id:e,group:{type:"USER",value:s,origin:"sap.default"}};this.callSDK("POST",t,"/app/group")})},onOpenDialog:function(e){let o=this._rolesModel.getProperty("/resources");let s=this._userModel.getProperty("/user/groups");const r=o.filter(e=>{const t=s.findIndex(t=>e.id===t.value);if(t>-1)return false;return true});this._rolesModel.setProperty("/resources",r);const n=this.getView();if(!this.oDialog){this.oDialog=t.load({name:`com.myorg.myUI5App.view.user.RoleDialog`,controller:this})}this.oDialog.then(e=>{n.addDependent(e);e.open()})},onRoleSearch:function(e){const t=e.getParameter("value");const o=new sap.ui.model.Filter("id","Contains",t);const s=e.getParameter("itemsBinding");s.filter([o])},onClose:function(){this.oDialog.then(e=>e.close())}})});