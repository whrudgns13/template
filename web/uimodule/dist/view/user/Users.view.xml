<mvc:View xmlns:core="sap.ui.core" controllerName="com.myorg.myUI5App.controller.user.Users" xmlns="sap.m" xmlns:f="sap.f" xmlns:form="sap.ui.layout.form" xmlns:mvc="sap.ui.core.mvc">
    <f:FlexibleColumnLayout id="fcl" layout="OneColumn">
        <f:beginColumnPages>
            <f:DynamicPage id="dynamicPageId" toggleHeaderOnTitleClick="false">
                <!-- DynamicPage Title -->
                <f:title>
                    <f:DynamicPageTitle>
                        <f:heading>
                            <Title text="Users" />
                        </f:heading>
                        <f:actions>
                            <Button text="Create" press="onOpenDialog">
                                <customData>
                                    <core:CustomData key="UserDialog" value="Create"/>
                                </customData>
                            </Button>
                        </f:actions>
                    </f:DynamicPageTitle>
                </f:title>
                <f:content>
                    <Table 
                        id="usersTable" 
                        items="{user>/users/resources}"
                        itemPress="onUserItemPress"
                        >
                        <columns>
                            <Column>
                                <Text text="User_ID" />
                            </Column>
                            <Column>
                                <Text text="User_Name" />
                            </Column>
                            <Column>
                                <Text text="User_Email" />
                            </Column>
                        </columns>
                        <items>
                            <ColumnListItem type="Navigation" >
                                <cells>
                                    <Text text="{user>id}" />
                                    <Text text="{user>name/familyName} {user>name/givenName}"/>
                                    <Text text="{user>emails/0/value}" />
                                </cells>
                            </ColumnListItem>
                        </items>
                    </Table>
                </f:content>
            </f:DynamicPage>
        </f:beginColumnPages>
        <f:midColumnPages>
            <f:DynamicPage>
                <f:title>
                    <f:DynamicPageTitle>
                        <f:heading>
                            <Title text="{user>/user/id}" />
                        </f:heading>
                        <f:actions>
                            <Button text="Edit" type="Emphasized" press="onOpenDialog">
                                <customData>
                                    <core:CustomData key="UserDialog" value="Edit"/>
                                </customData>
                            </Button>
                            <Button text="Delete" type="Emphasized" press="deleteUser"/>
                            <Button press="onFCLOneColumn" type="Emphasized" icon="sap-icon://decline" />
                        </f:actions>
                    </f:DynamicPageTitle>
                </f:title>
                <f:content>
                    <VBox>
                        <form:SimpleForm title="{user>/user/userName}">
                            <form:content>
                                <Label text="ID" />
                                <Text text="{user>/user/id}" />
                                <Label text="userName" />
                                <Text text="{user>/user/userName}" />
                                <Label text="emails" />
                                <Text text="{user>/user/emails/0/value}" />
                                <Label text="생성시간" />
                                <Text text="{user>/user/meta/created}" />
                                <Label text="마지막 업데이트" />
                                <Text text="{user>/user/meta/lastModified}" />
                            </form:content>
                        </form:SimpleForm>
                        <List items="{user>/user/groups}" mode="Delete" delete="onUserRoleDelete">
                            <headerToolbar>
                                <OverflowToolbar>
                                    <Text text="역할"/>
                                    <ToolbarSpacer/>
                                    <Button text="역할 추가" press="onOpenDialog">
                                        <customData>
                                            <core:CustomData key="RoleDialog" value="addRole"/>
                                        </customData>
                                    </Button> 
                                </OverflowToolbar>
                            </headerToolbar>
                            <items>
                                <StandardListItem title="{user>value}" />
                            </items>
                        </List>
                    </VBox>
                </f:content>
            </f:DynamicPage>
        </f:midColumnPages>
    </f:FlexibleColumnLayout>
</mvc:View>
